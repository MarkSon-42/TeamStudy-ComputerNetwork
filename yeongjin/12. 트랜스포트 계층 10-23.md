# 1. 트랜스포트 계층 (Transport Layer)

- **애플리케이션 식별**과 **요구에 맞는 전송 제어**를 수행하며, 네트워크와 애플리케이션을 연결합니다.
- 데이터를 안전하게 도달하도록 보장하는 기능을 수행합니다.

---

# 2. PDU (Protocol Data Unit)

- **데이터의 단위**를 의미하며, **제어 정보를 포함하는 헤더**와 **데이터 자체인 페이로드**로 구성됩니다.
    
### PDU 단위별 정의
    
1. **1계층** - 물리 계층: **비트**
2. **2계층** - 데이터링크 계층: **프레임**
3. **3계층** - 네트워크 계층: **패킷**
4. **4계층** - 트랜스포트 계층:
    - **세그먼트** (TCP)
    - **데이터그램** (UDP)
5. **5,6계층** - 세션, 표현 계층: **데이터**
6. **7계층** - 애플리케이션 계층: **메시지**

---

# 3. 포트 번호 (Port Number)

- **애플리케이션을 식별**하는 **2바이트 숫자**입니다.
- IP 패킷을 받은 단말은 **포트 번호**를 통해 **어떤 애플리케이션에서 처리해야 하는지** 알 수 있습니다.
- IP헤더만 있으면 어떤 수신지에도 IP패킷을 전송 가능, 그러나 IP패킷을 받은 단말은 그 IP패킷을 어떤 애플리케이션에서 처리하면 좋을지 모름
  ⇒ 포트 번호 사용. 포트 번호와 애플리케이션은 짝을 지어 묶여 있기 때문에 포트 번호만 있으면 어떤 애플리케이션에 데이터를 전달하면 좋을지 알 수 있음

---

# 4. TCP vs UDP

## **UDP (User Datagram Protocol)**

- **비연결 지향형**: 연결 없이 데이터를 전송하며, 송신자는 **수신 확인(ACK)**을 기다리지 않습니다. (UDP 커넥션 통로로 데이터 전송)
- **신뢰성 미보장**: 패킷 손실 시 **재전송이 없으며**, 데이터 유실 가능성이 있습니다.
- **데이터 순서 미보장**: 패킷이 독립적으로 전송되어 **도착 순서가 보장되지 않습니다.**
- **오버헤드가 작음**: 단순한 헤더로 **빠른 전송 속도**를 제공합니다.
- **실시간 전송에 적합**: 온라인 게임, 동영상 스트리밍 등 **지연이 중요한 서비스**에 유리합니다.
- **사용 예시**: DNS 조회, 동영상 스트리밍, 온라인 게임

---

## **TCP (Transmission Control Protocol)**

- **연결 지향형**: **3-Way Handshake**로 송수신 간 연결을 수립합니다.
- **신뢰성 보장**: 패킷 손실 시 **재전송**을 통해 데이터 무결성을 확보합니다.
- **데이터 순서 보장**: 패킷이 **전송된 순서대로 도착**하도록 관리합니다.
- **흐름 제어**: 송수신 속도 차이를 조절하여 **수신자가 처리 가능한 속도로 전송**합니다.
- **혼잡 제어**: 네트워크 혼잡을 방지하기 위해 **송신 속도를 조절**합니다.
- **오버헤드가 큼**: 복잡한 헤더로 인해 속도가 느립니다.
- **사용 예시**: HTTP/HTTPS, FTP, 이메일(SMTP) 등 **정확한 데이터 전송이 중요한 서비스**

---

# 5. TCP의 접속 시작 단계 (3-Way Handshake)

## **3-Way Handshake (TCP 연결 과정)**

1. **SYN**: 클라이언트가 서버에 **연결 요청** (SYN) 메시지를 전송합니다.
2. **SYN-ACK**: 서버가 연결 수락(SYN)과 **응답(ACK)** 메시지를 전송합니다.
3. **ACK**: 클라이언트가 서버의 응답을 확인하고 **연결이 성립**됩니다.

**목적**

- 양측이 **연결 준비**가 되었음을 확인합니다.
- 초기 시퀀스 번호(ISN)를 주고받아 데이터 순서를 보장합니다.

---

# 6. TCP의 신뢰성 보장 방법

### 1. 흐름 제어 (Flow Control)

- **송신자의 속도를 수신자가 감당할 수 있도록 조절**하는 기법입니다.
- **문제**: 송신자가 너무 빨리 데이터를 보내면 수신자 버퍼가 가득 차고 **데이터 손실**이 발생합니다.
- **해결**: 슬라이딩 윈도우(Sliding Window)를 사용해 **수신자의 윈도우 크기**만큼 데이터를 전송하고, ACK를 받으면 다음 데이터를 송신합니다.

---

### 2. 혼잡 제어 (Congestion Control)

- 네트워크 혼잡을 방지하고 최적의 전송 속도를 유지하기 위한 방법입니다.
    
#### TCP 혼잡 제어 알고리즘
    
1. **Slow Start**: 작은 윈도우 크기에서 시작해, ACK가 도착할 때마다 **기하급수적으로 증가**시킵니다.
2. **Congestion control algorithm**: 혼잡이면 혼잡 **윈도우를 감소**합니다. 혼잡하지 않으면 증가시킵니다. (패킷 송신 수 = 혼잡 윈도우)

---

### 3. 재전송 제어 (Retransmission Control)

- TCP는 **손실된 패킷을 재전송**하여 신뢰성을 보장합니다.
- **타이머 기반 재전송**: 일정 시간 내 ACK가 도착하지 않으면 **재전송**합니다.
- **Fast Retransmit**: 동일한 패킷에 대해 **3번 중복된 ACK**가 오면 타이머 만료 전 재전송합니다.

---

# 7. TCP 접속 종료 단계 (4-Way Handshake)

## **4-Way Handshake (TCP 연결 해제 과정)**

1. **FIN**: 클라이언트가 연결 종료를 요청하는 **FIN** 메시지를 전송합니다.
2. **ACK**: 서버가 연결 종료 요청을 **확인**하는 ACK 메시지를 전송합니다.
3. **FIN**: 서버도 데이터 전송이 끝났음을 알리는 **FIN** 메시지를 전송합니다.
4. **ACK**: 클라이언트가 종료를 **확인**하는 ACK 메시지를 전송합니다.

**목적**

- 일방적으로 연결이 종료되지 않도록 보장합니다.
- 송수신 양측의 **잔여 데이터**가 안전하게 전송되도록 조율합니다.
