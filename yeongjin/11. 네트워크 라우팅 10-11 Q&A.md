# 네트워크 라우팅 및 IP주소 할당 개념 정리

## 1. 라우팅이란?

라우팅은 **IP 패킷의 전송 대상지를 바꾸는 기능**입니다.  
라우터나 L3 스위치는 다음과 같은 정보를 이용해 IP 패킷의 경로를 결정합니다.

- **수신지 IP 주소**  
- **수신지 네트워크 정보**  
- **네트워크 홉 정보**: IP 패킷을 전송할 근접 기기의 IP 주소를 나타냄

> **네트워크 홉**: 출발지와 목적지 사이에 위치한 경로의 한 구간

---

## 2. 정적 라우팅 (Static Routing)

- **수동으로 라우팅 테이블을 구성**하는 방법입니다.
- **수신지 네트워크와 넥스트 홉**을 하나하나 설정합니다.
- **소규모 네트워크 환경**에 적합하며, 설정이 쉽고 관리가 간단합니다.  
- **대규모 네트워크**에서는 수동 설정의 비효율성으로 인해 부적합합니다.

---

## 3. 동적 라우팅 (Dynamic Routing)

- **근접한 라우터끼리 경로 정보를 자동으로 교환**해 라우팅 테이블을 만듭니다.
- **라우팅 프로토콜**을 사용해 경로 정보를 교환합니다.
- **규모가 큰 네트워크**나 **구성이 자주 바뀌는 환경**에 적합합니다.

**동적 라우팅의 장점**:
1. **경로 설정 자동화**: 수동 설정이 필요 없습니다.
2. **장애 복원성**: 장애 발생 시 라우팅 테이블을 자동으로 업데이트해 새로운 경로를 확보합니다.

---

## 4. 라우팅 프로토콜

라우팅 테이블을 만드는 방법은 제어 범위에 따라 두 가지로 나뉩니다.

- **IGP (Interior Gateway Protocol)**: AS 내부의 라우팅을 제어  
  - 예: RIP, OSPF, EIGRP  
- **EGP (Exterior Gateway Protocol)**: AS와 AS 간의 라우팅을 제어  

---

## 5. IGP의 라우팅 테이블 알고리즘

1. **디스턴스 벡터 알고리즘**: 거리와 방향을 기반으로 경로를 계산합니다.
2. **링크 스테이트 알고리즘**: 네트워크의 링크 상태를 기반으로 최적 경로를 계산합니다.

**메트릭 (Metric)**:
- **수신지 네트워크까지의 거리**를 의미하며, 계산 방식은 라우팅 프로토콜마다 다릅니다.  
- 여기서 거리는 물리적인 거리가 아니라 논리적 거리를 나타냅니다.

---

## 6. IP주소 할당 방법

### 1. 정적 할당 (Static IP Allocation)
- 각 단말에 대해 **수동으로 IP 주소를 설정**하는 방법입니다.
- **서버나 네트워크 장치**에 주로 사용되며, IP 주소가 자주 변하면 통신에 문제가 생길 수 있기 때문입니다.

**장점**:
- IP 주소와 단말이 고정적으로 연결되어 관리가 용이합니다.

**단점**:
- 단말이 많은 **대규모 LAN**에서는 비효율적입니다.

### 2. 동적 할당 (Dynamic IP Allocation)
- **DHCP 프로토콜**을 사용해 IP 주소를 자동으로 할당합니다.
- 대규모 네트워크에서 IP 주소를 일괄적으로 관리할 수 있습니다.

**장점**:
- 관리자의 수고를 줄일 수 있습니다.

**단점**:
- 어떤 단말에 어떤 IP 주소가 할당되었는지 파악하기 어렵습니다.

---

## 7. 동적 IP 할당 과정 (DHCP)

1. **DHCP Discover**:  
   클라이언트가 브로드캐스트로 IP 주소를 요청합니다.  
   → "누군가 IP 주소를 주십시오!"  
2. **DHCP Offer**:  
   서버가 유니캐스트로 IP 주소를 제안합니다.  
   → "이 IP 주소는 어떻습니까?"  
3. **DHCP Request**:  
   클라이언트가 제안된 IP 주소를 요청합니다.  
   → "부탁드립니다."  
4. **DHCP ACK**:  
   서버가 요청을 승인하고 할당된 IP 정보를 등록합니다.  
   → "사용하십시오."  

클라이언트는 해당 IP를 기반으로 게이트웨이와 DNS 설정 등을 수행합니다.  
서버는 **DHCP 데이터베이스**에 할당된 IP 주소를 기록합니다.

---

## 8. NAT (Network Address Translation)

**IP 주소를 변환**하는 기술로, **사설 IP 주소를 공인 IP 주소**로 변환합니다.  
이를 통해 **여러 사설 IP 주소**가 **하나의 공인 IP 주소**를 공유하며 인터넷에 접속할 수 있습니다.

**NAT 사용 이유**:
1. **공인 IP 주소의 절약**: 글로벌 IP 주소 부족 문제를 해결합니다.
2. **네트워크 충돌 방지**: 같은 네트워크 주소를 가진 시스템 간 통신이 가능해집니다.
